<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PulseColor - Galerie d'Animations</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/audio-player.css">
    <style>
        /* Styles spécifiques à la galerie */
        .gallery-header {
            text-align: center;
            padding: var(--space-2xl) 0;
            background: linear-gradient(135deg, hsl(var(--bg-a) / 0.1), hsl(var(--bg-b) / 0.1));
            border-radius: var(--radius-2xl);
            margin-bottom: var(--space-2xl);
        }

        .gallery-nav {
            display: flex;
            justify-content: center;
            gap: var(--space-sm);
            flex-wrap: wrap;
            margin-bottom: var(--space-xl);
            padding: var(--space-md);
            background: hsl(var(--surface) / 0.5);
            border-radius: var(--radius-lg);
            border: 1px solid hsl(var(--border));
        }

        .gallery-nav-btn {
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-md);
            background: hsl(var(--surface));
            border: 1px solid hsl(var(--border));
            color: hsl(var(--text-secondary));
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: var(--font-size-sm);
        }

        .gallery-nav-btn.active {
            background: hsl(var(--accent));
            color: white;
            border-color: hsl(var(--accent));
        }

        .gallery-nav-btn:hover:not(.active) {
            background: hsl(var(--surface-elevated));
            border-color: hsl(var(--accent) / 0.5);
        }

        .gallery-section {
            margin-bottom: var(--space-2xl);
            padding: var(--space-lg);
            background: hsl(var(--surface) / 0.3);
            border-radius: var(--radius-xl);
            border: 1px solid hsl(var(--border));
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-lg);
            margin-top: var(--space-lg);
        }

        .animation-card {
            padding: var(--space-lg);
            background: hsl(var(--surface) / 0.5);
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius-lg);
            text-align: center;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .animation-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 30px hsl(var(--accent) / 0.2);
        }

        .animation-demo {
            width: 100px;
            height: 100px;
            margin: 0 auto var(--space-md);
            display: flex;
            align-items: center;
            justify-content: center;
            background: hsl(var(--surface-elevated));
            border-radius: var(--radius-md);
            font-size: 2rem;
            position: relative;
        }

        .animation-title {
            font-size: var(--font-size-lg);
            font-weight: 700;
            margin-bottom: var(--space-sm);
            color: hsl(var(--text-primary));
        }

        .animation-description {
            font-size: var(--font-size-sm);
            color: hsl(var(--text-secondary));
            margin-bottom: var(--space-md);
        }

        .animation-controls {
            display: flex;
            gap: var(--space-xs);
            justify-content: center;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            background: hsl(var(--surface));
            border: 1px solid hsl(var(--border));
            color: hsl(var(--text-secondary));
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: var(--font-size-xs);
        }

        .control-btn:hover {
            background: hsl(var(--accent));
            color: white;
            border-color: hsl(var(--accent));
        }

        .particle-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .liquid-demo {
            width: 100px;
            height: 100px;
            position: relative;
            overflow: hidden;
            border-radius: var(--radius-md);
            background: hsl(var(--surface-elevated));
        }

        .text-demo {
            font-size: 1.5rem;
            font-weight: 700;
            color: hsl(var(--accent));
        }

        .loading-demo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
        }

        .spinner-svg {
            width: 40px;
            height: 40px;
        }

        .spinner-svg circle {
            stroke: hsl(var(--accent));
            stroke-width: 4;
            fill: none;
            stroke-dasharray: 150;
            stroke-dashoffset: 150;
        }

        .scroll-demo {
            opacity: 0;
            transform: translateY(20px);
        }

        .scroll-demo.visible {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.6s ease-out;
        }

        .filter-demo {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, hsl(var(--bg-a)), hsl(var(--bg-b)));
            border-radius: var(--radius-md);
        }

        .mask-demo {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, hsl(var(--accent)), hsl(var(--bg-a)));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }

        .perspective-demo {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, hsl(var(--bg-a)), hsl(var(--bg-b)));
            border-radius: var(--radius-md);
            transform-style: preserve-3d;
        }

        .clip-demo {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, hsl(var(--accent)), hsl(var(--bg-a)));
            border-radius: var(--radius-md);
        }

        .shadow-demo {
            width: 100px;
            height: 100px;
            background: hsl(var(--accent));
            border-radius: var(--radius-md);
        }

        .origin-demo {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, hsl(var(--bg-a)), hsl(var(--bg-b)));
            border-radius: var(--radius-md);
        }

        .complex-demo {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, hsl(var(--accent)), hsl(var(--bg-a)), hsl(var(--bg-b)));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 0.8rem;
        }

        .back-to-top {
            position: fixed;
            bottom: var(--space-lg);
            right: var(--space-lg);
            width: 50px;
            height: 50px;
            background: hsl(var(--accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            box-shadow: var(--shadow-lg);
            transition: all var(--transition-normal);
            z-index: var(--z-fixed);
        }

        .back-to-top:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }

        .section-hidden {
            display: none;
        }

        .section-visible {
            display: block;
        }

        /* Styles pour les nouvelles animations */
        .lyrics-container {
            width: 100%;
            height: 120px;
            background: hsl(var(--surface-elevated));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .lyrics-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: hsl(var(--text-primary));
            text-align: center;
            transition: all 0.3s ease;
            opacity: 0.3;
        }

        .lyrics-text.active {
            opacity: 1;
            color: hsl(var(--accent));
            transform: scale(1.1);
            text-shadow: 0 0 10px hsl(var(--accent) / 0.5);
        }

        .lyrics-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: hsl(var(--accent));
            transition: width 0.1s linear;
        }

        .image-color-container {
            width: 100%;
            height: 120px;
            border-radius: var(--radius-md);
            overflow: hidden;
            position: relative;
        }

        .image-color-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: filter 0.3s ease;
        }

        .image-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, hsl(var(--accent) / 0.3));
            mix-blend-mode: overlay;
            transition: all 0.3s ease;
        }

        .waveform-container {
            width: 100%;
            height: 120px;
            background: hsl(var(--surface-elevated));
            border-radius: var(--radius-md);
            position: relative;
            overflow: hidden;
        }

        .waveform-canvas {
            width: 100%;
            height: 100%;
        }

        .audio-particles-container {
            width: 100%;
            height: 120px;
            background: hsl(var(--surface-elevated));
            border-radius: var(--radius-md);
            position: relative;
            overflow: hidden;
        }

        .audio-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: hsl(var(--accent));
            border-radius: 50%;
            pointer-events: none;
        }

        .color-palette-container {
            width: 100%;
            height: 120px;
            border-radius: var(--radius-md);
            overflow: hidden;
            position: relative;
            display: flex;
        }

        .color-swatch {
            flex: 1;
            transition: all 0.3s ease;
            position: relative;
        }

        .color-swatch::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: inherit;
            filter: brightness(1.2) saturate(1.5);
        }

        .color-info {
            position: absolute;
            bottom: 5px;
            left: 5px;
            font-size: 0.7rem;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            font-weight: 600;
        }

        .audio-sync-indicator {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 8px;
            height: 8px;
            background: hsl(var(--accent));
            border-radius: 50%;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .audio-sync-indicator.inactive {
            background: hsl(var(--text-secondary));
            animation: none;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <!-- Navigation -->
        <nav class="nav">
            <a href="index.html" class="logo">
                <span class="text-gradient">PulseColor</span>
            </a>
            <div class="nav-links">
                <a href="index.html" class="btn btn-ghost">Accueil</a>
                <a href="gallery.html" class="btn btn-primary">Galerie</a>
            </div>
        </nav>

        <!-- Header de la galerie -->
        <div class="gallery-header">
            <h1 class="glitch-text" data-text="Galerie d'Animations">Galerie d'Animations</h1>
            <p class="text-gradient">Découvrez 25 animations complexes et avancées avec synchronisation audio</p>
        </div>

        <!-- Navigation de la galerie -->
        <div class="gallery-nav">
            <button class="gallery-nav-btn active" data-section="particles">Particules</button>
            <button class="gallery-nav-btn" data-section="morphing">Morphing</button>
            <button class="gallery-nav-btn" data-section="glitch">Glitch</button>
            <button class="gallery-nav-btn" data-section="liquid">Liquide</button>
            <button class="gallery-nav-btn" data-section="neon">Néon</button>
            <button class="gallery-nav-btn" data-section="3d">3D</button>
            <button class="gallery-nav-btn" data-section="text">Texte</button>
            <button class="gallery-nav-btn" data-section="loading">Loading</button>
            <button class="gallery-nav-btn" data-section="hover">Hover</button>
            <button class="gallery-nav-btn" data-section="scroll">Scroll</button>
            <button class="gallery-nav-btn" data-section="background">Fond</button>
            <button class="gallery-nav-btn" data-section="border">Bordure</button>
            <button class="gallery-nav-btn" data-section="transform">Transform</button>
            <button class="gallery-nav-btn" data-section="filter">Filtre</button>
            <button class="gallery-nav-btn" data-section="mask">Masque</button>
            <button class="gallery-nav-btn" data-section="perspective">Perspective</button>
            <button class="gallery-nav-btn" data-section="clip">Clip-Path</button>
            <button class="gallery-nav-btn" data-section="shadow">Ombre</button>
            <button class="gallery-nav-btn" data-section="origin">Origin</button>
            <button class="gallery-nav-btn" data-section="complex">Complexe</button>
            <button class="gallery-nav-btn" data-section="lyrics">Lyrics</button>
            <button class="gallery-nav-btn" data-section="image-color">Image Color</button>
            <button class="gallery-nav-btn" data-section="waveform">Waveform</button>
            <button class="gallery-nav-btn" data-section="audio-particles">Audio Particles</button>
            <button class="gallery-nav-btn" data-section="color-palette">Color Palette</button>
        </div>

        <!-- Section Particules -->
        <section id="particles" class="gallery-section section-visible">
            <h2>Animations de Particules</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="particle particle-float"></div>
                        <div class="particle particle-float animation-delay-1"></div>
                        <div class="particle particle-float animation-delay-2"></div>
                    </div>
                    <h3 class="animation-title">Particules Flottantes</h3>
                    <p class="animation-description">Particules qui flottent vers le haut avec rotation</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="particle particle-explosion"></div>
                    </div>
                    <h3 class="animation-title">Explosion de Particules</h3>
                    <p class="animation-description">Effet d'explosion avec échelle et rotation</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="restartAnimation(this)">Restart</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Morphing -->
        <section id="morphing" class="gallery-section section-hidden">
            <h2>Animations de Morphing</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="morph-blob" style="width: 80px; height: 80px;"></div>
                    </div>
                    <h3 class="animation-title">Blob Morphing</h3>
                    <p class="animation-description">Forme organique qui change de manière fluide</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Glitch -->
        <section id="glitch" class="gallery-section section-hidden">
            <h2>Animations de Glitch</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="text-demo glitch-text" data-text="GLITCH">GLITCH</div>
                    </div>
                    <h3 class="animation-title">Texte Glitch</h3>
                    <p class="animation-description">Effet de corruption visuelle sur le texte</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Liquide -->
        <section id="liquid" class="gallery-section section-hidden">
            <h2>Animations de Liquide</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="liquid-demo">
                            <div class="liquid-wave"></div>
                        </div>
                    </div>
                    <h3 class="animation-title">Onde Liquide</h3>
                    <p class="animation-description">Effet d'onde liquide animée</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Néon -->
        <section id="neon" class="gallery-section section-hidden">
            <h2>Animations de Néon</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo neon-pulse">
                        <div class="text-demo">NÉON</div>
                    </div>
                    <h3 class="animation-title">Pulsation Néon</h3>
                    <p class="animation-description">Effet de pulsation lumineuse</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo neon-flicker">
                        <div class="text-demo">FLICKER</div>
                    </div>
                    <h3 class="animation-title">Scintillement Néon</h3>
                    <p class="animation-description">Effet de scintillement rapide</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3D -->
        <section id="3d" class="gallery-section section-hidden">
            <h2>Animations 3D</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="rotate-3d" style="width: 80px; height: 80px; background: linear-gradient(45deg, hsl(var(--bg-a)), hsl(var(--bg-b))); border-radius: var(--radius-md);"></div>
                    </div>
                    <h3 class="animation-title">Rotation 3D</h3>
                    <p class="animation-description">Rotation complexe en 3D avec perspective</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="flip-card" style="width: 80px; height: 80px; background: linear-gradient(45deg, hsl(var(--accent)), hsl(var(--bg-a))); border-radius: var(--radius-md);"></div>
                    </div>
                    <h3 class="animation-title">Flip Card</h3>
                    <p class="animation-description">Retournement de carte en 3D</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="restartAnimation(this)">Restart</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Texte -->
        <section id="text" class="gallery-section section-hidden">
            <h2>Animations de Texte</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="text-demo typing-text" style="width: 0; overflow: hidden;">TYPING</div>
                    </div>
                    <h3 class="animation-title">Machine à Écrire</h3>
                    <p class="animation-description">Effet de frappe avec curseur clignotant</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="restartAnimation(this)">Restart</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="text-demo text-wave">WAVE</div>
                    </div>
                    <h3 class="animation-title">Texte en Vague</h3>
                    <p class="animation-description">Mouvement ondulant du texte</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Loading -->
        <section id="loading" class="gallery-section section-hidden">
            <h2>Animations de Loading</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="spinner"></div>
                    </div>
                    <h3 class="animation-title">Spinner Classique</h3>
                    <p class="animation-description">Spinner rotatif avec bordure</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <svg class="spinner-svg" viewBox="0 0 50 50">
                            <circle cx="25" cy="25" r="20"></circle>
                        </svg>
                    </div>
                    <h3 class="animation-title">Spinner SVG</h3>
                    <p class="animation-description">Spinner SVG avec animation de trait</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="pulse-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <h3 class="animation-title">Points Pulsants</h3>
                    <p class="animation-description">Points qui pulsent en séquence</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Hover -->
        <section id="hover" class="gallery-section section-hidden">
            <h2>Animations de Hover</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo hover-lift">
                        <div class="text-demo">LIFT</div>
                    </div>
                    <h3 class="animation-title">Élévation</h3>
                    <p class="animation-description">Survolez pour voir l'effet d'élévation</p>
                </div>

                <div class="animation-card">
                    <div class="animation-demo hover-glow">
                        <div class="text-demo">GLOW</div>
                    </div>
                    <h3 class="animation-title">Lueur</h3>
                    <p class="animation-description">Survolez pour voir l'effet de lueur</p>
                </div>

                <div class="animation-card">
                    <div class="animation-demo hover-shake">
                        <div class="text-demo">SHAKE</div>
                    </div>
                    <h3 class="animation-title">Tremblement</h3>
                    <p class="animation-description">Survolez pour voir l'effet de tremblement</p>
                </div>
            </div>
        </section>

        <!-- Section Scroll -->
        <section id="scroll" class="gallery-section section-hidden">
            <h2>Animations de Scroll</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo scroll-fade-in">
                        <div class="text-demo">FADE IN</div>
                    </div>
                    <h3 class="animation-title">Apparition en Fondu</h3>
                    <p class="animation-description">Animation déclenchée au scroll</p>
                </div>

                <div class="animation-card">
                    <div class="animation-demo scroll-slide-left">
                        <div class="text-demo">SLIDE LEFT</div>
                    </div>
                    <h3 class="animation-title">Glissement Gauche</h3>
                    <p class="animation-description">Animation de glissement vers la gauche</p>
                </div>

                <div class="animation-card">
                    <div class="animation-demo scroll-slide-right">
                        <div class="text-demo">SLIDE RIGHT</div>
                    </div>
                    <h3 class="animation-title">Glissement Droite</h3>
                    <p class="animation-description">Animation de glissement vers la droite</p>
                </div>

                <div class="animation-card">
                    <div class="animation-demo scroll-scale-in">
                        <div class="text-demo">SCALE IN</div>
                    </div>
                    <h3 class="animation-title">Apparition par Échelle</h3>
                    <p class="animation-description">Animation d'échelle au scroll</p>
                </div>
            </div>
        </section>

        <!-- Section Fond -->
        <section id="background" class="gallery-section section-hidden">
            <h2>Animations de Fond</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo gradient-shift" style="width: 100%; height: 100px; border-radius: var(--radius-md);"></div>
                    <h3 class="animation-title">Dégradé Dynamique</h3>
                    <p class="animation-description">Dégradé qui se déplace en continu</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo background-pulse" style="width: 100%; height: 100px; background: linear-gradient(45deg, hsl(var(--bg-a)), hsl(var(--bg-b))); border-radius: var(--radius-md);"></div>
                    <h3 class="animation-title">Pulsation de Fond</h3>
                    <p class="animation-description">Pulsation de l'opacité du fond</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Bordure -->
        <section id="border" class="gallery-section section-hidden">
            <h2>Animations de Bordure</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo border-dance" style="width: 100px; height: 100px; background: hsl(var(--surface-elevated)); border-radius: var(--radius-md);"></div>
                    <h3 class="animation-title">Bordure Dansante</h3>
                    <p class="animation-description">Bordure qui change de couleur</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo border-glow" style="width: 100px; height: 100px; background: hsl(var(--surface-elevated)); border-radius: var(--radius-md); border: 2px solid hsl(var(--accent));"></div>
                    <h3 class="animation-title">Bordure Lumineuse</h3>
                    <p class="animation-description">Bordure avec effet de lueur</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Transform -->
        <section id="transform" class="gallery-section section-hidden">
            <h2>Animations de Transformation</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="morph-shape" style="width: 80px; height: 80px; background: linear-gradient(45deg, hsl(var(--accent)), hsl(var(--bg-a)));"></div>
                    </div>
                    <h3 class="animation-title">Morphing de Forme</h3>
                    <p class="animation-description">Changement de forme avec clip-path</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="skew-bounce" style="width: 80px; height: 80px; background: linear-gradient(45deg, hsl(var(--bg-a)), hsl(var(--bg-b))); border-radius: var(--radius-md);"></div>
                    </div>
                    <h3 class="animation-title">Inclinaison et Rebond</h3>
                    <p class="animation-description">Inclinaison avec effet de rebond</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Filtre -->
        <section id="filter" class="gallery-section section-hidden">
            <h2>Animations de Filtre</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="filter-shift filter-demo"></div>
                    </div>
                    <h3 class="animation-title">Changement de Filtre</h3>
                    <p class="animation-description">Changement de teinte et luminosité</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="blur-pulse filter-demo"></div>
                    </div>
                    <h3 class="animation-title">Pulsation de Flou</h3>
                    <p class="animation-description">Pulsation de l'effet de flou</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Masque -->
        <section id="mask" class="gallery-section section-hidden">
            <h2>Animations de Masque</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="mask-reveal mask-demo">REVEAL</div>
                    </div>
                    <h3 class="animation-title">Révélation par Masque</h3>
                    <p class="animation-description">Révélation progressive avec masque</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="mask-slide mask-demo">SLIDE</div>
                    </div>
                    <h3 class="animation-title">Glissement de Masque</h3>
                    <p class="animation-description">Glissement du masque</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Perspective -->
        <section id="perspective" class="gallery-section section-hidden">
            <h2>Animations de Perspective</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="perspective-rotate perspective-demo"></div>
                    </div>
                    <h3 class="animation-title">Rotation avec Perspective</h3>
                    <p class="animation-description">Rotation 3D avec perspective</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="perspective-zoom perspective-demo"></div>
                    </div>
                    <h3 class="animation-title">Zoom avec Perspective</h3>
                    <p class="animation-description">Zoom 3D avec perspective</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Clip-Path -->
        <section id="clip" class="gallery-section section-hidden">
            <h2>Animations de Clip-Path</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="clip-reveal clip-demo"></div>
                    </div>
                    <h3 class="animation-title">Révélation par Découpage</h3>
                    <p class="animation-description">Révélation avec clip-path</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="restartAnimation(this)">Restart</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="clip-circle clip-demo"></div>
                    </div>
                    <h3 class="animation-title">Apparition Circulaire</h3>
                    <p class="animation-description">Apparition en forme de cercle</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="restartAnimation(this)">Restart</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Ombre -->
        <section id="shadow" class="gallery-section section-hidden">
            <h2>Animations d'Ombre</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="shadow-pulse shadow-demo"></div>
                    </div>
                    <h3 class="animation-title">Pulsation d'Ombre</h3>
                    <p class="animation-description">Pulsation de l'ombre</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="shadow-float shadow-demo"></div>
                    </div>
                    <h3 class="animation-title">Ombre Flottante</h3>
                    <p class="animation-description">Ombre qui flotte</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Origin -->
        <section id="origin" class="gallery-section section-hidden">
            <h2>Animations d'Origine</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="origin-rotate origin-demo"></div>
                    </div>
                    <h3 class="animation-title">Rotation d'Origine</h3>
                    <p class="animation-description">Rotation avec origine variable</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="origin-scale origin-demo"></div>
                    </div>
                    <h3 class="animation-title">Échelle d'Origine</h3>
                    <p class="animation-description">Échelle avec origine variable</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Complexe -->
        <section id="complex" class="gallery-section section-hidden">
            <h2>Animations Complexes</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="complex-animation complex-demo">COMPLEX</div>
                    </div>
                    <h3 class="animation-title">Animation Complexe</h3>
                    <p class="animation-description">Combinaison de multiples effets</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAnimation(this)">Pause/Play</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Lyrics -->
        <section id="lyrics" class="gallery-section section-hidden">
            <h2>Lyrics Synchronisées</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="lyrics-container">
                            <div class="audio-sync-indicator inactive"></div>
                            <div class="lyrics-text" id="lyrics-text">Cliquez sur Play pour voir les lyrics</div>
                            <div class="lyrics-progress" id="lyrics-progress"></div>
                        </div>
                    </div>
                    <h3 class="animation-title">Lyrics en Temps Réel</h3>
                    <p class="animation-description">Paroles synchronisées avec la musique</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleLyrics(this)">Activer</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="lyrics-container">
                            <div class="audio-sync-indicator inactive"></div>
                            <div class="lyrics-text" id="lyrics-text-2">Paroles avec effets visuels</div>
                            <div class="lyrics-progress" id="lyrics-progress-2"></div>
                        </div>
                    </div>
                    <h3 class="animation-title">Lyrics avec Effets</h3>
                    <p class="animation-description">Paroles avec animations avancées</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleLyrics(this)">Activer</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Image Color -->
        <section id="image-color" class="gallery-section section-hidden">
            <h2>Images Dynamiques</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="image-color-container">
                            <div class="audio-sync-indicator inactive"></div>
                            <img src="https://images.pexels.com/photos/2014422/pexels-photo-2014422.jpeg" alt="Nature" id="dynamic-image-1">
                            <div class="image-overlay"></div>
                        </div>
                    </div>
                    <h3 class="animation-title">Image Réactive</h3>
                    <p class="animation-description">Image qui change selon la musique</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleImageColor(this)">Activer</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="image-color-container">
                            <div class="audio-sync-indicator inactive"></div>
                            <img src="https://images.pexels.com/photos/255379/pexels-photo-255379.jpeg" alt="City" id="dynamic-image-2">
                            <div class="image-overlay"></div>
                        </div>
                    </div>
                    <h3 class="animation-title">Filtres Dynamiques</h3>
                    <p class="animation-description">Filtres qui s'adaptent au rythme</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleImageColor(this)">Activer</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Waveform -->
        <section id="waveform" class="gallery-section section-hidden">
            <h2>Waveform Interactif</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="waveform-container">
                            <div class="audio-sync-indicator inactive"></div>
                            <canvas class="waveform-canvas" id="waveform-canvas-1"></canvas>
                        </div>
                    </div>
                    <h3 class="animation-title">Waveform en Temps Réel</h3>
                    <p class="animation-description">Visualisation d'onde sonore interactive</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleWaveform(this)">Activer</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="waveform-container">
                            <div class="audio-sync-indicator inactive"></div>
                            <canvas class="waveform-canvas" id="waveform-canvas-2"></canvas>
                        </div>
                    </div>
                    <h3 class="animation-title">Spectrum Analyzer</h3>
                    <p class="animation-description">Analyseur de spectre audio</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleWaveform(this)">Activer</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Audio Particles -->
        <section id="audio-particles" class="gallery-section section-hidden">
            <h2>Particules Audio-Réactives</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="audio-particles-container" id="audio-particles-1">
                            <div class="audio-sync-indicator inactive"></div>
                        </div>
                    </div>
                    <h3 class="animation-title">Particules Réactives</h3>
                    <p class="animation-description">Particules qui réagissent au volume</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAudioParticles(this)">Activer</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="audio-particles-container" id="audio-particles-2">
                            <div class="audio-sync-indicator inactive"></div>
                        </div>
                    </div>
                    <h3 class="animation-title">Explosion Audio</h3>
                    <p class="animation-description">Explosion de particules selon la fréquence</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleAudioParticles(this)">Activer</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Color Palette -->
        <section id="color-palette" class="gallery-section section-hidden">
            <h2>Générateur de Palette</h2>
            <div class="gallery-grid">
                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="color-palette-container" id="color-palette-1">
                            <div class="audio-sync-indicator inactive"></div>
                            <div class="color-swatch" style="background: #ff6b6b;">
                                <div class="color-info">#ff6b6b</div>
                            </div>
                            <div class="color-swatch" style="background: #4ecdc4;">
                                <div class="color-info">#4ecdc4</div>
                            </div>
                            <div class="color-swatch" style="background: #45b7d1;">
                                <div class="color-info">#45b7d1</div>
                            </div>
                            <div class="color-swatch" style="background: #96ceb4;">
                                <div class="color-info">#96ceb4</div>
                            </div>
                            <div class="color-swatch" style="background: #feca57;">
                                <div class="color-info">#feca57</div>
                            </div>
                        </div>
                    </div>
                    <h3 class="animation-title">Palette Harmonique</h3>
                    <p class="animation-description">Palette qui change selon la musique</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleColorPalette(this)">Activer</button>
                    </div>
                </div>

                <div class="animation-card">
                    <div class="animation-demo">
                        <div class="color-palette-container" id="color-palette-2">
                            <div class="audio-sync-indicator inactive"></div>
                            <div class="color-swatch" style="background: #e74c3c;">
                                <div class="color-info">#e74c3c</div>
                            </div>
                            <div class="color-swatch" style="background: #3498db;">
                                <div class="color-info">#3498db</div>
                            </div>
                            <div class="color-swatch" style="background: #2ecc71;">
                                <div class="color-info">#2ecc71</div>
                            </div>
                            <div class="color-swatch" style="background: #f1c40f;">
                                <div class="color-info">#f1c40f</div>
                            </div>
                            <div class="color-swatch" style="background: #9b59b6;">
                                <div class="color-info">#9b59b6</div>
                            </div>
                        </div>
                    </div>
                    <h3 class="animation-title">Palette Dynamique</h3>
                    <p class="animation-description">Couleurs qui pulsent avec le rythme</p>
                    <div class="animation-controls">
                        <button class="control-btn" onclick="toggleColorPalette(this)">Activer</button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Bouton retour en haut -->
    <a href="#" class="back-to-top" onclick="scrollToTop()">↑</a>

    <!-- Audio Player -->
    <div class="audio-player" id="audio-player">
      <div class="audio-level-indicator"></div>
      
      <div class="audio-player-header">
        <div class="audio-player-title">PulseColor Audio Player</div>
        <button class="collapse-btn" onclick="toggleAudioPlayer()">−</button>
      </div>
      
      <div class="audio-player-content">
        <div class="audio-info">
          <div class="track-info" id="track-info">Aucune piste sélectionnée</div>
          
          <div class="audio-progress">
            <span class="time-display" id="current-time">00:00</span>
            <input type="range" class="progress-slider" id="progress-slider" min="0" max="100" value="0">
            <span class="time-display" id="total-time">00:00</span>
          </div>
          
          <div class="audio-controls">
            <button class="control-btn" id="prev-btn" title="Piste précédente">⏮</button>
            <button class="control-btn play-btn" id="play-btn" title="Play/Pause">▶</button>
            <button class="control-btn" id="stop-btn" title="Stop">⏹</button>
            <button class="control-btn" id="next-btn" title="Piste suivante">⏭</button>
            
            <div class="volume-control">
              <span class="volume-icon">🔊</span>
              <input type="range" class="volume-slider" id="volume-slider" min="0" max="100" value="100">
            </div>
          </div>
        </div>
        
        <div class="audio-visualizations">
          <div class="visualization-container">
            <canvas id="spectrum-canvas" class="spectrum-canvas"></canvas>
            <div class="visualization-label">Spectrum</div>
          </div>
          
          <div class="visualization-container">
            <canvas id="vu-canvas" class="vu-canvas"></canvas>
            <div class="visualization-label">VU Meter</div>
          </div>
          
          <div class="visualization-container">
            <canvas id="equalizer-canvas" class="equalizer-canvas"></canvas>
            <div class="visualization-label">Equalizer</div>
          </div>
        </div>
      </div>
      
      <div class="playlist-container" id="playlist-container">
        <!-- La playlist sera générée dynamiquement -->
      </div>
    </div>

    <script src="js/audio-player.js"></script>
    <script>
        // Navigation de la galerie
        const navButtons = document.querySelectorAll('.gallery-nav-btn');
        const sections = document.querySelectorAll('.gallery-section');

        navButtons.forEach(button => {
            button.addEventListener('click', () => {
                const targetSection = button.getAttribute('data-section');
                
                // Mise à jour des boutons
                navButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Affichage des sections
                sections.forEach(section => {
                    section.classList.remove('section-visible');
                    section.classList.add('section-hidden');
                });
                
                document.getElementById(targetSection).classList.remove('section-hidden');
                document.getElementById(targetSection).classList.add('section-visible');
            });
        });

        // Contrôles d'animation
        function toggleAnimation(button) {
            const card = button.closest('.animation-card');
            const animatedElement = card.querySelector('.animation-demo > *');
            
            if (animatedElement.style.animationPlayState === 'paused') {
                animatedElement.style.animationPlayState = 'running';
                button.textContent = 'Pause';
            } else {
                animatedElement.style.animationPlayState = 'paused';
                button.textContent = 'Play';
            }
        }

        function restartAnimation(button) {
            const card = button.closest('.animation-card');
            const animatedElement = card.querySelector('.animation-demo > *');
            
            animatedElement.style.animation = 'none';
            animatedElement.offsetHeight; // Force reflow
            animatedElement.style.animation = null;
        }

        // Animations de scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.scroll-demo').forEach(el => {
            observer.observe(el);
        });

        // Retour en haut
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Affichage/masquage du bouton retour en haut
        window.addEventListener('scroll', () => {
            const backToTop = document.querySelector('.back-to-top');
            if (window.scrollY > 300) {
                backToTop.style.display = 'flex';
            } else {
                backToTop.style.display = 'none';
            }
        });

        // Initialisation
        document.addEventListener('DOMContentLoaded', () => {
            // Masquer le bouton retour en haut au chargement
            document.querySelector('.back-to-top').style.display = 'none';
        });
        
        // Fonction pour basculer l'affichage du player audio
        function toggleAudioPlayer() {
            const player = document.getElementById('audio-player');
            const collapseBtn = document.querySelector('.collapse-btn');
            
            if (player.classList.contains('collapsed')) {
                player.classList.remove('collapsed');
                collapseBtn.textContent = '−';
            } else {
                player.classList.add('collapsed');
                collapseBtn.textContent = '+';
            }
        }

        // Variables globales pour les animations audio
        let audioContext = null;
        let analyser = null;
        let dataArray = null;
        let animationId = null;
        let activeAnimations = new Set();

        // Paroles fictives pour les animations
        const lyricsData = [
            {
                text: "Des lignes de voyage dans le vent",
                time: 0,
                duration: 3000
            },
            {
                text: "Des voyages de rêve qui nous emportent",
                time: 3000,
                duration: 4000
            },
            {
                text: "Vers des horizons lointains et mystérieux",
                time: 7000,
                duration: 3500
            },
            {
                text: "Où la musique guide nos pas",
                time: 10500,
                duration: 3000
            },
            {
                text: "Dans cette danse éternelle du temps",
                time: 13500,
                duration: 4000
            }
        ];

        // Images Pexels pour les animations
        const pexelsImages = [
            'https://images.pexels.com/photos/2014422/pexels-photo-2014422.jpeg',
            'https://images.pexels.com/photos/255379/pexels-photo-255379.jpeg',
            'https://images.pexels.com/photos/1287145/pexels-photo-1287145.jpeg',
            'https://images.pexels.com/photos/1563355/pexels-photo-1563355.jpeg',
            'https://images.pexels.com/photos/1694000/pexels-photo-1694000.jpeg'
        ];

        // Palettes de couleurs harmoniques
        const colorPalettes = [
            ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57'],
            ['#e74c3c', '#3498db', '#2ecc71', '#f1c40f', '#9b59b6'],
            ['#ff9ff3', '#54a0ff', '#5f27cd', '#00d2d3', '#ff9f43'],
            ['#ff3838', '#ff9ff3', '#f368e0', '#0abde3', '#48dbfb'],
            ['#ff6b6b', '#ee5a24', '#ff9ff3', '#54a0ff', '#5f27cd']
        ];

        // Initialisation de l'audio context
        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                analyser.fftSize = 256;
                const bufferLength = analyser.frequencyBinCount;
                dataArray = new Uint8Array(bufferLength);
            }
        }

        // Connexion de l'audio au contexte
        function connectAudioToContext(audioElement) {
            if (audioContext && audioElement) {
                const source = audioContext.createMediaElementSource(audioElement);
                source.connect(analyser);
                analyser.connect(audioContext.destination);
            }
        }

        // Fonction pour obtenir les données audio
        function getAudioData() {
            if (analyser && dataArray) {
                analyser.getByteFrequencyData(dataArray);
                return dataArray;
            }
            return null;
        }

        // Animation des lyrics
        function toggleLyrics(button) {
            const card = button.closest('.animation-card');
            const container = card.querySelector('.lyrics-container');
            const textElement = container.querySelector('.lyrics-text');
            const progressElement = container.querySelector('.lyrics-progress');
            const indicator = container.querySelector('.audio-sync-indicator');
            
            if (activeAnimations.has('lyrics')) {
                activeAnimations.delete('lyrics');
                indicator.classList.add('inactive');
                button.textContent = 'Activer';
                return;
            }

            activeAnimations.add('lyrics');
            indicator.classList.remove('inactive');
            button.textContent = 'Désactiver';

            const audio = document.querySelector('audio');
            if (!audio) return;

            let currentLyricIndex = 0;
            let startTime = Date.now();

            function updateLyrics() {
                if (!activeAnimations.has('lyrics')) return;

                const currentTime = audio.currentTime * 1000;
                const lyric = lyricsData.find((l, index) => {
                    return currentTime >= l.time && currentTime < l.time + l.duration;
                });

                if (lyric) {
                    textElement.textContent = lyric.text;
                    textElement.classList.add('active');
                    
                    const progress = ((currentTime - lyric.time) / lyric.duration) * 100;
                    progressElement.style.width = progress + '%';
                } else {
                    textElement.classList.remove('active');
                    progressElement.style.width = '0%';
                }

                animationId = requestAnimationFrame(updateLyrics);
            }

            updateLyrics();
        }

        // Animation des images
        function toggleImageColor(button) {
            const card = button.closest('.animation-card');
            const container = card.querySelector('.image-color-container');
            const img = container.querySelector('img');
            const overlay = container.querySelector('.image-overlay');
            const indicator = container.querySelector('.audio-sync-indicator');
            
            if (activeAnimations.has('image-color')) {
                activeAnimations.delete('image-color');
                indicator.classList.add('inactive');
                button.textContent = 'Activer';
                return;
            }

            activeAnimations.add('image-color');
            indicator.classList.remove('inactive');
            button.textContent = 'Désactiver';

            let imageIndex = 0;

            function updateImage() {
                if (!activeAnimations.has('image-color')) return;

                const audioData = getAudioData();
                if (audioData) {
                    const average = audioData.reduce((a, b) => a + b) / audioData.length;
                    const intensity = average / 255;

                    // Changement de filtre selon l'intensité
                    const hue = (intensity * 360) % 360;
                    const saturation = 50 + (intensity * 50);
                    const brightness = 100 + (intensity * 50);
                    
                    img.style.filter = `hue-rotate(${hue}deg) saturate(${saturation}%) brightness(${brightness}%)`;
                    
                    // Changement d'image périodique
                    if (intensity > 0.7 && Math.random() > 0.95) {
                        imageIndex = (imageIndex + 1) % pexelsImages.length;
                        img.src = pexelsImages[imageIndex];
                    }
                }

                animationId = requestAnimationFrame(updateImage);
            }

            updateImage();
        }

        // Animation du waveform
        function toggleWaveform(button) {
            const card = button.closest('.animation-card');
            const container = card.querySelector('.waveform-container');
            const canvas = container.querySelector('.waveform-canvas');
            const indicator = container.querySelector('.audio-sync-indicator');
            
            if (activeAnimations.has('waveform')) {
                activeAnimations.delete('waveform');
                indicator.classList.add('inactive');
                button.textContent = 'Activer';
                return;
            }

            activeAnimations.add('waveform');
            indicator.classList.remove('inactive');
            button.textContent = 'Désactiver';

            const ctx = canvas.getContext('2d');
            canvas.width = container.offsetWidth;
            canvas.height = container.offsetHeight;

            function drawWaveform() {
                if (!activeAnimations.has('waveform')) return;

                const audioData = getAudioData();
                if (audioData) {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    const barWidth = canvas.width / audioData.length;
                    const barMaxHeight = canvas.height * 0.8;

                    for (let i = 0; i < audioData.length; i++) {
                        const barHeight = (audioData[i] / 255) * barMaxHeight;
                        const x = i * barWidth;
                        const y = (canvas.height - barHeight) / 2;

                        const hue = (i / audioData.length) * 360;
                        ctx.fillStyle = `hsl(${hue}, 70%, 60%)`;
                        ctx.fillRect(x, y, barWidth - 1, barHeight);
                    }
                }

                animationId = requestAnimationFrame(drawWaveform);
            }

            drawWaveform();
        }

        // Animation des particules audio
        function toggleAudioParticles(button) {
            const card = button.closest('.animation-card');
            const container = card.querySelector('.audio-particles-container');
            const indicator = container.querySelector('.audio-sync-indicator');
            
            if (activeAnimations.has('audio-particles')) {
                activeAnimations.delete('audio-particles');
                indicator.classList.add('inactive');
                button.textContent = 'Activer';
                // Nettoyer les particules existantes
                container.querySelectorAll('.audio-particle').forEach(p => p.remove());
                return;
            }

            activeAnimations.add('audio-particles');
            indicator.classList.remove('inactive');
            button.textContent = 'Désactiver';

            const particles = [];

            function createParticle() {
                const particle = document.createElement('div');
                particle.className = 'audio-particle';
                particle.style.left = Math.random() * container.offsetWidth + 'px';
                particle.style.top = container.offsetHeight + 'px';
                container.appendChild(particle);

                return {
                    element: particle,
                    x: parseFloat(particle.style.left),
                    y: container.offsetHeight,
                    vx: (Math.random() - 0.5) * 2,
                    vy: -Math.random() * 3 - 1,
                    life: 1
                };
            }

            function updateParticles() {
                if (!activeAnimations.has('audio-particles')) return;

                const audioData = getAudioData();
                if (audioData) {
                    const average = audioData.reduce((a, b) => a + b) / audioData.length;
                    const intensity = average / 255;

                    // Créer de nouvelles particules selon l'intensité
                    if (intensity > 0.3 && Math.random() > 0.7) {
                        particles.push(createParticle());
                    }
                }

                // Mettre à jour les particules existantes
                for (let i = particles.length - 1; i >= 0; i--) {
                    const particle = particles[i];
                    particle.y += particle.vy;
                    particle.x += particle.vx;
                    particle.life -= 0.02;

                    particle.element.style.left = particle.x + 'px';
                    particle.element.style.top = particle.y + 'px';
                    particle.element.style.opacity = particle.life;

                    if (particle.life <= 0) {
                        particle.element.remove();
                        particles.splice(i, 1);
                    }
                }

                animationId = requestAnimationFrame(updateParticles);
            }

            updateParticles();
        }

        // Animation de la palette de couleurs
        function toggleColorPalette(button) {
            const card = button.closest('.animation-card');
            const container = card.querySelector('.color-palette-container');
            const swatches = container.querySelectorAll('.color-swatch');
            const indicator = container.querySelector('.audio-sync-indicator');
            
            if (activeAnimations.has('color-palette')) {
                activeAnimations.delete('color-palette');
                indicator.classList.add('inactive');
                button.textContent = 'Activer';
                return;
            }

            activeAnimations.add('color-palette');
            indicator.classList.remove('inactive');
            button.textContent = 'Désactiver';

            let paletteIndex = 0;

            function updatePalette() {
                if (!activeAnimations.has('color-palette')) return;

                const audioData = getAudioData();
                if (audioData) {
                    const average = audioData.reduce((a, b) => a + b) / audioData.length;
                    const intensity = average / 255;

                    // Changer de palette selon l'intensité
                    if (intensity > 0.6 && Math.random() > 0.98) {
                        paletteIndex = (paletteIndex + 1) % colorPalettes.length;
                        const newPalette = colorPalettes[paletteIndex];
                        
                        swatches.forEach((swatch, index) => {
                            if (newPalette[index]) {
                                swatch.style.background = newPalette[index];
                                swatch.querySelector('.color-info').textContent = newPalette[index];
                            }
                        });
                    }

                    // Effet de pulsation
                    swatches.forEach((swatch, index) => {
                        const pulseIntensity = intensity * 0.3;
                        swatch.style.transform = `scale(${1 + pulseIntensity})`;
                    });
                }

                animationId = requestAnimationFrame(updatePalette);
            }

            updatePalette();
        }

        // Écouteur pour la connexion audio
        document.addEventListener('DOMContentLoaded', () => {
            const audio = document.querySelector('audio');
            if (audio) {
                audio.addEventListener('play', () => {
                    initAudioContext();
                    connectAudioToContext(audio);
                });
            }
        });
    </script>
</body>
</html>
